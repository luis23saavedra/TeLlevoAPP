<ion-content class="fondo letra ">

  <form action="" #formulario="ngForm" (ngSubmit)="guardarDatos()">
    
    <div class="margin-superior caja3 letra ">
      <ion-row >
          <ion-col size="12">
            Nombre
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra" >
              <input matInput placeholder="Ingrese su nombre" name="nombre" type="text" minlength=3 maxlength=10 class="letra" [(ngModel)]="datos.nombre" #nombre="ngModel" pattern="^[a-zA-ZñÑáéíóúÁÉÍÓÚ]+$"  required>
              <!-- VALIDACIONES -->
              <mat-error *ngIf="nombre.errors?.['required']">
                Debes ingresar tu nombre.
              </mat-error>
              <mat-error *ngIf="nombre.errors?.['pattern']">
                Nombre inválido.
              </mat-error>
              <mat-error *ngIf="nombre.errors?.['minlength']">
                Debes ingresar al menos 3 carácteres.
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>
    
    <div class="margin-contenido caja3 letra">
      <ion-row >
          <ion-col size="12">
            Apellido
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra" >
              <input matInput placeholder="Ingrese su apellido" name="apellido" type="text" minlength=3 maxlength=10  class="letra" [(ngModel)]="datos.apellido" #apellido="ngModel" pattern="^[a-zA-ZñÑáéíóúÁÉÍÓÚ]+$" required >
              <!-- VALIDACIONES -->
              <mat-error *ngIf="apellido.errors?.['required']">
                Debes ingresar tu apellido.
              </mat-error>
              <mat-error *ngIf="apellido.errors?.['pattern']">
                Apellido inválido.
              </mat-error>
              <mat-error *ngIf="apellido.errors?.['minlength']">
                Debes ingresar al menos 4 carácteres.
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>

    <div class="margin-contenido caja3 letra ">
      <ion-row >
          <ion-col size="12">
            Rut
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra" >
              <input matInput placeholder="Ingrese su rut" name="rut" type="text" minlength=10 maxlength=10 class="letra" [(ngModel)]="datos.rut" #rut="ngModel" pattern="^[0-9]+-[0-9kK]{1}$"  required>
              <!-- VALIDACIONES -->
              <mat-error *ngIf="rut.errors?.['required']">
                Debes ingresar tu rut.
              </mat-error>
              <mat-error *ngIf="rut.errors?.['pattern']">
                Rut inválido.
              </mat-error>
              <mat-error *ngIf="rut.errors?.['minlength']">
                El rut debe contener 10 carácteres.
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>

    <div class="margin-contenido caja3">
      <ion-row>
        <ion-col size="12">
          Selecciona tu sector
        </ion-col>
        <ion-col size="12">  
          <mat-form-field appearance="fill">
            <mat-select [(ngModel)]="selectedRuta" name="select" placeholder="Seleccione una opción" #select="ngModel" [(ngModel)]="datos.ruta" required>
              <mat-option *ngFor="let select of opcionesRuta"  [value]="select.value"  required>
                {{select.viewValue}}
              </mat-option>
            </mat-select>
            <!-- VALIDACIONES -->
            <mat-error *ngIf="select.errors?.['required']">
              Debes ingresar tu sector.
            </mat-error>
            <!-- VALIDACIONES -->
          </mat-form-field>
        </ion-col>
      </ion-row>
    </div>
    
    <div class="margin-contenido caja3 letra">
      <ion-row >
          <ion-col size="12">
            Correo Electrónico
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra" >
              <input matInput placeholder="Ingrese su correo electrónico" name="email"
               class="letra" [formControl]="email" [(ngModel)]="datos.email" required>
              <!-- VALIDACIONES -->
               <mat-error *ngIf="email.invalid">
                {{getErrorMessage()}}
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>

    <div class="margin-contenido caja3 letra">
      <ion-row >
          <ion-col size="12">
            Contraseña
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra ancho" >
              <input matInput placeholder="Ingrese su contraseña" name="contrasenia" type="password" minlength=5 maxlength=5 class="letra" #contrasenia="ngModel" pattern="^[0-9]+$" [(ngModel)]="datos.contrasenia" required>
              <!-- VALIDACIONES -->
              <mat-error *ngIf="contrasenia.errors?.['required']">
                Debes ingresar tu contrasenia.
              </mat-error>
              <mat-error *ngIf="contrasenia.errors?.['pattern']">
                La contraseña debe contener sólo números.
              </mat-error>
              <mat-error *ngIf="contrasenia.errors?.['minlength']">
                La contraseña debe contener 5 números.
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>

    <div class="margin-contenido caja3 letra">
      <ion-row >
          <ion-col size="12">
            Confirmar Contraseña
          </ion-col>
          <ion-col size="12">
            <mat-form-field appearance="fill" class="letra ancho" >
              <input matInput placeholder="Confirme su contraseña" name="confirmarContrasenia" type="password" minlength=5 maxlength=5 minlength=5 maxlength=5 #confirmarContrasenia="ngModel" pattern="^[0-9]+$" class="letra" [(ngModel)]="datos.confirmarContrasenia" required>
              <!-- VALIDACIONES -->
              <mat-error *ngIf="confirmarContrasenia.errors?.['required']">
                Debes confirmar tu contrasenia.
              </mat-error>
              <mat-error *ngIf="confirmarContrasenia.errors?.['pattern']">
                Las contraseñas no coinciden.
              </mat-error>
              <mat-error *ngIf="confirmarContrasenia.errors?.['minlength']">
                Debes ingresar 5 números.
              </mat-error>
              <mat-error class="confirmar-contrasenia" *ngIf="contador>0">      {{getConfirmaContrasenia()}}
              </mat-error>
              <!-- VALIDACIONES -->
            </mat-form-field>
          </ion-col>  
      </ion-row>
    </div>

    <ion-row>
      <div>
        <button mat-flat-button [disabled]="formulario.invalid" type="submit" class="margenb" [routerLink]="['/login']" (click)="presentAlert()">Registrar</button>
      </div> 
    </ion-row>

    <ion-row>
      <div>
        <button mat-flat-button  class="margenb2" [routerLink]="['/home']" >Volver</button>
      </div> 
    </ion-row>

  </form>
</ion-content>
